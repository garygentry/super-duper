<Window
    x:Class="SuperDuper.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    >

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="36" />
        </Grid.RowDefinitions>

        <!-- Row 0: NavigationView is built entirely in code-behind because the
             raw XAML parser (DisableXbfGeneration=true) doesn't wire NavigationView's
             internal click-to-selection routing. API-created NavigationView works. -->

        <!-- Row 1: Bottom status bar (36px) -->
        <Grid Grid.Row="1"
              Padding="16,0"
              Background="{ThemeResource NavigationViewExpandedPaneBackground}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <!-- Deletion queue summary -->
            <TextBlock Grid.Column="0"
                       x:Name="StatusBarText"
                       Text="{Binding ViewModel.DeletionQueueSummary, Mode=OneWay}"
                       VerticalAlignment="Center"
                       Style="{StaticResource CaptionTextBlockStyle}"
                       Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                       AutomationProperties.Name="Deletion queue status" />

            <!-- Undo/Redo buttons -->
            <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="4" VerticalAlignment="Center" Margin="0,0,8,0">
                <Button x:Name="UndoButton"
                        Command="{Binding ViewModel.UndoCommand}"
                        IsEnabled="{Binding ViewModel.CanUndo, Mode=OneWay}"
                        ToolTipService.ToolTip="{Binding ViewModel.UndoDescription, Mode=OneWay}"
                        Background="Transparent" BorderThickness="0" Padding="8,4"
                        AutomationProperties.Name="Undo last action">
                    <FontIcon Glyph="&#xE7A7;" FontSize="14" />
                </Button>
                <Button x:Name="RedoButton"
                        Command="{Binding ViewModel.RedoCommand}"
                        IsEnabled="{Binding ViewModel.CanRedo, Mode=OneWay}"
                        ToolTipService.ToolTip="{Binding ViewModel.RedoDescription, Mode=OneWay}"
                        Background="Transparent" BorderThickness="0" Padding="8,4"
                        AutomationProperties.Name="Redo last undone action">
                    <FontIcon Glyph="&#xE7A6;" FontSize="14" />
                </Button>
            </StackPanel>

            <!-- Review & Delete trigger -->
            <Button Grid.Column="2"
                    x:Name="ReviewDeleteButton"
                    Content="Review &amp; Delete â†’"
                    Style="{StaticResource AccentButtonStyle}"
                    Height="28"
                    FontSize="12"
                    IsEnabled="{Binding ViewModel.IsDeletionQueueNonEmpty, Mode=OneWay}"
                    AutomationProperties.Name="Open deletion review dialog"
                    VerticalAlignment="Center" />
        </Grid>

        <!-- Keyboard accelerators are wired in code-behind -->
    </Grid>
</Window>
