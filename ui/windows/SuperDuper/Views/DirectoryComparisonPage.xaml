<!-- DirectoryComparisonPage: Shows pairs of similar directories -->
<Page
    x:Class="SuperDuper.Views.DirectoryComparisonPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:nm="using:SuperDuper.NativeMethods">

    <Grid Padding="24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Spacing="8" Margin="0,0,0,16">
            <TextBlock Text="Directory Comparison" Style="{StaticResource TitleTextBlockStyle}" />
            <TextBlock Text="Directories with similar or identical content"
                       Style="{StaticResource SubtitleTextBlockStyle}" />
        </StackPanel>

        <!-- Controls -->
        <StackPanel Grid.Row="1" Orientation="Horizontal" Spacing="12" Margin="0,0,0,16">
            <TextBlock Text="Min similarity:" VerticalAlignment="Center" />
            <Slider Minimum="0.1" Maximum="1.0" StepFrequency="0.1"
                    Value="{x:Bind ViewModel.MinScore, Mode=TwoWay}"
                    Width="200" />
            <TextBlock Text="{x:Bind ViewModel.MinScore, Mode=OneWay}"
                       VerticalAlignment="Center" />
        </StackPanel>

        <!-- Similarity pairs list -->
        <ListView Grid.Row="2"
                  ItemsSource="{x:Bind ViewModel.SimilarPairs}"
                  SelectionMode="None">
            <ListView.ItemTemplate>
                <DataTemplate x:DataType="nm:DirectorySimilarityInfo">
                    <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                            CornerRadius="8" Padding="16" Margin="0,4">
                        <Grid RowSpacing="8">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Row="0" Grid.Column="0" Spacing="4">
                                <TextBlock Text="{x:Bind DirAId}" FontWeight="SemiBold" />
                                <TextBlock Text="{x:Bind DirBId}" Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                            </StackPanel>

                            <StackPanel Grid.Row="0" Grid.Column="1" HorizontalAlignment="Right" Spacing="4">
                                <TextBlock Text="{x:Bind MatchType}" FontWeight="Bold"
                                           Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}" />
                                <TextBlock Text="{x:Bind SimilarityScore}"
                                           HorizontalAlignment="Right" />
                            </StackPanel>
                        </Grid>
                    </Border>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>

        <ProgressRing Grid.Row="2"
                      IsActive="{x:Bind ViewModel.IsLoading, Mode=OneWay}"
                      Visibility="{x:Bind ViewModel.IsLoading, Mode=OneWay}" />
    </Grid>
</Page>
